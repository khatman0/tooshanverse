<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ثبت‌نام با ارسال ایمیل تأیید</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
</head>
<body>
<h2>ثبت‌نام</h2>
<form id="signup-form">
  <input type="email" id="email" placeholder="ایمیل" required />
  <br /><br />
  <input type="password" id="password" placeholder="رمز عبور" required />
  <br /><br />
  <button type="submit">ثبت‌نام</button>
</form>

<script>
// کانفیگ دقیق شما:
const firebaseConfig = {
  apiKey: "AIzaSyBI9L7fSuounX5Dy4fJNbjNJQg3grRAafk",
  authDomain: "tooshanchat.firebaseapp.com",
  databaseURL: "https://tooshanchat-default-rtdb.firebaseio.com",
  projectId: "tooshanchat",
  storageBucket: "tooshanchat.firebasestorage.app",
  messagingSenderId: "444788859489",
  appId: "1:444788859489:web:ecc4619d8ce56136b00020",
  measurementId: "G-KWZMRPN48E"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();

document.getElementById('signup-form').addEventListener('submit', async (e) => {
  e.preventDefault();

  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value.trim();

  try {
    const userCredential = await auth.createUserWithEmailAndPassword(email, password);
    const user = userCredential.user;

    await user.sendEmailVerification();

    alert('ثبت‌نام موفقیت‌آمیز بود. ایمیل تأیید برای شما ارسال شد. لطفا صندوق ایمیل خود را بررسی کنید.');

    e.target.reset();

  } catch (error) {
    alert('خطا در ثبت‌نام: ' + error.message);
    console.error(error);
  }
});
</script>
</body>
</html>
