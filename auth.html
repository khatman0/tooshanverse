<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>ورود و ثبت‌نام توشان‌ورس</title>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getAuth,
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword,
      sendEmailVerification
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    // کانفیگ پروژه‌ات
    const firebaseConfig = {
      apiKey: "AIzaSyBI9L7fSuounX5Dy4fJNbjNJQg3grRAafk",
      authDomain: "tooshanchat.firebaseapp.com",
      databaseURL: "https://tooshanchat-default-rtdb.firebaseio.com",
      projectId: "tooshanchat",
      storageBucket: "tooshanchat.firebasestorage.app",
      messagingSenderId: "444788859489",
      appId: "1:444788859489:web:ecc4619d8ce56136b00020",
      measurementId: "G-KWZMRPN48E"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // فرم ثبت‌نام
    window.signUp = async function() {
      const email = document.getElementById("signup-email").value;
      const password = document.getElementById("signup-password").value;
      try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
        await sendEmailVerification(userCredential.user);
        alert("ثبت‌نام با موفقیت انجام شد! یک ایمیل تأیید برای شما ارسال شد.");
      } catch (error) {
        alert("خطا: " + error.message);
      }
    };

    // فرم ورود
    window.login = async function() {
      const email = document.getElementById("login-email").value;
      const password = document.getElementById("login-password").value;
      try {
        const userCredential = await signInWithEmailAndPassword(auth, email, password);
        alert("ورود موفقیت‌آمیز بود!");
        // بعد از ورود می‌تونی ریدایرکت کنی به سایت اصلی:
        // window.location.href = "/index.html";
      } catch (error) {
        alert("خطا: " + error.message);
      }
    };
  </script>
</head>
<body dir="rtl" style="font-family: sans-serif; text-align: center; margin-top: 50px;">
  <h2>ثبت‌نام</h2>
  <input type="email" id="signup-email" placeholder="ایمیل"><br><br>
  <input type="password" id="signup-password" placeholder="رمز عبور"><br><br>
  <button onclick="signUp()">ثبت‌نام</button>

  <hr style="margin: 30px 0;">

  <h2>ورود</h2>
  <input type="email" id="login-email" placeholder="ایمیل"><br><br>
  <input type="password" id="login-password" placeholder="رمز عبور"><br><br>
  <button onclick="login()">ورود</button>
</body>
</html>
