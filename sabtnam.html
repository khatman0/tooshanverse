<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ثبت‌نام / ورود توشان‌ورس</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;700&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
<style>
:root{
  --bg: #0a0a0f;
  --card-bg: rgba(10,25,60,0.6);
  --accent: #1ca7ff;
  --text: #f0f0f0;
}
*{box-sizing:border-box;}
body{margin:0;font-family:'Vazirmatn',sans-serif;background:var(--bg);color:var(--text);display:flex;align-items:center;justify-content:center;height:100vh;}
.card{background:var(--card-bg);backdrop-filter:blur(6px);padding:28px 24px;border-radius:16px;width:100%;max-width:400px;box-shadow:0 12px 36px rgba(0,0,0,0.6);}
h2{text-align:center;color:var(--accent);margin-bottom:20px;}
input,button{width:100%;padding:12px;border-radius:10px;border:none;margin-top:10px;font-size:1rem;}
input{background:rgba(255,255,255,0.05);color:var(--text);}
button{background:var(--accent);color:#fff;cursor:pointer;transition:0.2s;}
button:hover{opacity:0.85;}
.toggle-btn{background:transparent;color:var(--accent);margin-top:8px;font-size:0.9rem;}
</style>
</head>
<body>

<div class="card" id="authCard">
  <h2>ثبت‌نام / ورود</h2>

  <div id="signupForm">
    <input type="text" id="displayName" placeholder="اسم نمایشی">
    <input type="email" id="signupEmail" placeholder="ایمیل">
    <input type="password" id="signupPassword" placeholder="رمز عبور">
    <button id="signupBtn">ثبت‌نام</button>
    <button class="toggle-btn" id="toLoginBtn">حساب دارید؟ ورود</button>
  </div>

  <div id="loginForm" style="display:none;">
    <input type="email" id="loginEmail" placeholder="ایمیل">
    <input type="password" id="loginPassword" placeholder="رمز عبور">
    <button id="loginBtn">ورود</button>
    <button class="toggle-btn" id="toSignupBtn">حساب ندارید؟ ثبت‌نام</button>
  </div>

</div>

<script>
// ---------- Firebase Config ----------
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

// ---------- UI Elements ----------
const signupForm = document.getElementById('signupForm');
const loginForm = document.getElementById('loginForm');
const toLoginBtn = document.getElementById('toLoginBtn');
const toSignupBtn = document.getElementById('toSignupBtn');

const displayNameInput = document.getElementById('displayName');
const signupEmailInput = document.getElementById('signupEmail');
const signupPasswordInput = document.getElementById('signupPassword');
const signupBtn = document.getElementById('signupBtn');

const loginEmailInput = document.getElementById('loginEmail');
const loginPasswordInput = document.getElementById('loginPassword');
const loginBtn = document.getElementById('loginBtn');

// ---------- Toggle Forms ----------
toLoginBtn.addEventListener('click', ()=>{
  signupForm.style.display='none';
  loginForm.style.display='block';
});
toSignupBtn.addEventListener('click', ()=>{
  loginForm.style.display='none';
  signupForm.style.display='block';
});

// ---------- Sign Up ----------
signupBtn.addEventListener('click', ()=>{
  const displayName = displayNameInput.value.trim();
  const email = signupEmailInput.value.trim();
  const password = signupPasswordInput.value;
  if(!displayName || !email || !password){
    alert("لطفاً همه فیلدها را پر کنید.");
    return;
  }
  auth.createUserWithEmailAndPassword(email,password)
  .then(userCredential=>{
    // اضافه کردن اسم نمایشی
    return userCredential.user.updateProfile({displayName: displayName});
  })
  .then(()=>{
    alert("ثبت‌نام موفق! خوش آمدید " + displayName);
  })
  .catch(err=>alert(err.message));
});

// ---------- Login ----------
loginBtn.addEventListener('click', ()=>{
  const email = loginEmailInput.value.trim();
  const password = loginPasswordInput.value;
  auth.signInWithEmailAndPassword(email,password)
  .then(userCredential=>{
    alert("ورود موفق! خوش آمدید " + userCredential.user.displayName);
  })
  .catch(err=>alert(err.message));
});

// ---------- Auth State ----------
auth.onAuthStateChanged(user=>{
  if(user){
    console.log("کاربر وارد شده:", user.displayName);
    // در اینجا می‌تونید کاربران رو به صفحات چت یا داستان هدایت کنید
  }
});
</script>

</body>
</html>
