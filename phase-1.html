<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>فاز ۱: برخورد نخست - آسمان شب</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    font-family: "Tahoma", sans-serif;
    background: radial-gradient(circle at top left, #0b0c2a, #1a1a3c 80%);
    position: relative;
  }

  /* ماه */
  .moon {
    position: absolute;
    top: 30px;
    left: 30px;
    width: 80px;
    height: 80px;
    background: radial-gradient(circle, #fff 0%, #ccc 70%);
    border-radius: 50%;
    box-shadow: 0 0 20px rgba(255,255,255,0.6);
  }

  /* ستاره‌ها */
  .star {
    position: absolute;
    width: 4px;
    height: 4px;
    background: white;
    border-radius: 50%;
    opacity: 0.8;
  }

  /* ستاره‌های چشمک‌زن (کلیک‌خور) */
  .star.blink {
    animation: blink 1.5s infinite;
    cursor: pointer;
  }

  @keyframes blink {
    0%, 100% { opacity: 0.3; transform: scale(0.8);}
    50% { opacity: 1; transform: scale(1.3);}
  }

  /* پاپ‌آپ */
  .popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    background: rgba(0,0,0,0.9);
    padding: 25px 35px;
    border-radius: 15px;
    color: #fff;
    text-align: center;
    box-shadow: 0 0 25px rgba(255, 174, 66, 0.7);
    transition: transform 0.3s ease;
    z-index: 100;
  }

  .popup.show {
    transform: translate(-50%, -50%) scale(1);
  }

  .popup h2 {
    margin: 0 0 15px 0;
    color: #ffae42;
  }

  .popup button {
    background: #ffae42;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    font-size: 1rem;
    cursor: pointer;
    color: #000;
    transition: all 0.3s ease;
  }

  .popup button:hover {
    background: #ffc966;
  }
</style>
</head>
<body>

<div class="moon"></div>

<!-- پاپ‌آپ -->
<div class="popup" id="popup">
  <h2 id="storyName">داستان</h2>
  <button id="goStory">رفتن به داستان</button>
</div>

<script>
  const stories = [
    {name: "لردفیزیکا: انفجار آبی", url: "lord-physica.html"},
    {name: "الکتروپالس: ولتاژ ناشناخته", url: "electropulse.html"},
    {name: "استریکس: بند ذهن", url: "strix.html"},
    {name: "تسکین: خاموشی سنسور", url: "taskin.html"}
  ];

  const totalStars = 100; // ستاره‌های معمولی
  const blinkStars = 10;  // ستاره‌های چشمک زن و کلیک‌خور

  // ایجاد ستاره‌ها
  for(let i=0;i<totalStars;i++){
    const star = document.createElement('div');
    star.classList.add('star');
    star.style.top = Math.random()*100 + "%";
    star.style.left = Math.random()*100 + "%";
    star.style.width = star.style.height = (Math.random()*3 + 2) + "px";
    document.body.appendChild(star);
  }

  // ایجاد ستاره‌های چشمک‌زن
  for(let i=0;i<blinkStars;i++){
    const star = document.createElement('div');
    star.classList.add('star','blink');
    star.style.top = Math.random()*100 + "%";
    star.style.left = Math.random()*100 + "%";
    star.style.width = star.style.height = (Math.random()*4 + 4) + "px";
    document.body.appendChild(star);

    // انتخاب داستان به صورت تصادفی
    const story = stories[i % stories.length];

    // کلیک روی ستاره
    star.addEventListener('click',()=>{
      const popup = document.getElementById('popup');
      document.getElementById('storyName').innerText = story.name;
      const goBtn = document.getElementById('goStory');
      goBtn.onclick = ()=>{ window.location.href = story.url; }
      popup.classList.add('show');
    });
  }

  // کلیک بیرون پاپ‌آپ برای بستن
  document.body.addEventListener('click', (e)=>{
    const popup = document.getElementById('popup');
    if(e.target.classList.contains('star') || e.target.id==='goStory') return;
    popup.classList.remove('show');
  });
</script>

</body>
</html>
