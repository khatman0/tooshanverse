<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>کمیک‌ها | توشان‌ورس</title>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap" rel="stylesheet" />
  <style>
    * {
      box-sizing: border-box;
    }
    body, html {
      margin: 0; padding: 0; height: 100%;
      font-family: 'Vazirmatn', sans-serif;
      background: linear-gradient(135deg, #3e0f0f, #5c1a1a, #2b0a0a);
      color: #f0c040;
      direction: rtl;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header, footer {
      background-color: #1a1a1a;
      color: #ff9900;
      text-align: center;
      padding: 20px 15px;
      flex-shrink: 0;
      box-shadow: 0 0 10px #ff990055;
    }
    main {
      flex-grow: 1;
      max-width: 1200px;
      margin: 20px auto;
      width: 95%;
      display: flex;
      gap: 20px;
      min-height: 400px;
    }
    /* لیست فازها */
    #phaseList {
      flex: 0 0 180px;
      background: #1f1f1f;
      border-radius: 12px;
      box-shadow: 0 0 15px #ff990044;
      padding: 15px;
      user-select: none;
    }
    #phaseList li {
      padding: 10px 15px;
      margin-bottom: 10px;
      cursor: pointer;
      border-radius: 8px;
      transition: background-color 0.3s ease;
      box-shadow: 0 0 5px #ff990033;
    }
    #phaseList li.active, #phaseList li:hover {
      background-color: #ff9900;
      color: #111;
      box-shadow: 0 0 12px #ff9900dd;
      font-weight: bold;
    }
    /* لیست داستان‌ها */
    #storyList {
      flex: 0 0 220px;
      background: #1f1f1f;
      border-radius: 12px;
      box-shadow: 0 0 15px #ff990044;
      padding: 15px;
      user-select: none;
      overflow-y: auto;
      max-height: 500px;
    }
    #storyList li {
      padding: 8px 12px;
      margin-bottom: 8px;
      cursor: pointer;
      border-radius: 8px;
      transition: background-color 0.3s ease;
      box-shadow: 0 0 5px #ff990033;
      font-size: 14.5px;
    }
    #storyList li.active, #storyList li:hover {
      background-color: #ff9900;
      color: #111;
      box-shadow: 0 0 12px #ff9900dd;
      font-weight: bold;
    }
    /* محتوای داستان */
    #storyContent {
      flex-grow: 1;
      background: #1a1a1a;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 20px #ff990055;
      overflow-y: auto;
      max-height: 500px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #storyTitle {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #ffcc33;
      text-align: center;
    }
    #storyCover {
      max-width: 100%;
      max-height: 300px;
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: 0 0 15px #ff9900bb;
      display: none; /* اگر عکسی بود نمایش داده شود */
      object-fit: contain;
    }
    #storyText {
      font-size: 16px;
      line-height: 1.6;
      text-align: justify;
      color: #f0c040;
      white-space: pre-wrap;
    }
    /* ریسپانسیو برای موبایل */
    @media (max-width: 900px) {
      main {
        flex-direction: column;
      }
      #phaseList, #storyList, #storyContent {
        max-height: none;
        flex: none;
        width: 100%;
        margin-bottom: 15px;
      }
      #storyContent {
        order: 3;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>📚 کمیک‌ها | توشان‌ورس</h1>
    <p>فاز مورد نظر را انتخاب کنید و داستان‌های آن را مشاهده کنید.</p>
  </header>

  <main>
    <ul id="phaseList" aria-label="لیست فازها">
      <!-- فازها اینجا توسط JS ساخته می‌شوند -->
    </ul>

    <ul id="storyList" aria-label="لیست داستان‌ها">
      <!-- داستان‌ها اینجا توسط JS ساخته می‌شوند -->
    </ul>

    <section id="storyContent" aria-live="polite">
      <h2 id="storyTitle"></h2>
      <img id="storyCover" src="" alt="کاور داستان" />
      <p id="storyText"></p>
    </section>
  </main>

  <footer>
    <p>تمام حقوق متعلق به توشان استودیو © 2025</p>
  </footer>

<script>
  // داده‌ها: 6 فاز نمونه با چند داستان
  const phases = {
    phase1: [
      { id: 'p1s1', title: 'لردفیزیکا:انفجار آبی', cover: '', text: 'متن داستان به زودی اضاف خواهد شد' },
      { id: 'p1s2', title: 'الکتروپالس:ولتاژ ناشناخته', cover: '', text: 'متن داستان به زودی اضاف خواهد شد ' },
      { id: 'p1s3', title: 'المنت ها:عناصر پنهان', cover: '', text: 'متن داستان به زودی اضاف خواهد شد' },
      { id: 'p1s4', title: 'استریکس:بند ذهن', cover: '', text: 'متن داستان به زودی اضاف خواهد شد' },
      { id: 'p1s5', title: 'تسکین:خاموشی سنسور', cover: '', text: 'متن داستان به زودی اضاف خواهد شد' },
    ],
    phase2: [
      { id: 'p2s1', title: 'المنت ها 2:پیوند عنصری', cover: '', text: 'متن داستان به زودی اضاف خواهد شد' },
      { id: 'p2s2', title: 'استریکس 2:توهم مشترک', cover: '', text: 'متن داستان به زودی اضاف خواهد شد' },
      { id: 'p2s3', title: 'مرداویچ:بازگشت دوم', cover: '', text: 'متن داستان به زودی اضاف خواهد شد' },
      { id: 'p2s4', title: 'تسکین 2:نبض خاموشی', cover: '', text: 'متن داستان به زودی اضاف خواهد شد' },
      { id: 'p2s5', title: 'گردآفرید:پیکار ناتمام', cover: '', text: 'متن داستان به زودی اضاف خواهد شد' },
    ],
    phase3: [
      { id: 'p3s1', title: 'داستان ۳-۱', cover: '', text: 'متن داستان ۳-۱...' },
    ],
    phase4: [],
    phase5: [],
    phase6: [],
    phase7: [],
  };

  // گرفتن المان‌ها
  const phaseList = document.getElementById('phaseList');
  const storyList = document.getElementById('storyList');
  const storyTitle = document.getElementById('storyTitle');
  const storyCover = document.getElementById('storyCover');
  const storyText = document.getElementById('storyText');

  // ساخت لیست فازها
  function buildPhaseList() {
    phaseList.innerHTML = '';
    let i = 1;
    for (const key in phases) {
      const li = document.createElement('li');
      li.textContent = `فاز ${i}`;
      li.dataset.phase = key;
      li.tabIndex = 0;
      li.addEventListener('click', () => {
        setActivePhase(key);
      });
      li.addEventListener('keydown', e => {
        if(e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          setActivePhase(key);
        }
      });
      phaseList.appendChild(li);
      i++;
    }
  }

  // نمایش داستان‌ها وقتی فاز انتخاب شد
  function showStories(phaseKey) {
    storyList.innerHTML = '';
    const stories = phases[phaseKey] || [];
    if (stories.length === 0) {
      storyList.innerHTML = '<li>داستانی برای این فاز موجود نیست.</li>';
      clearContent();
      return;
    }
    showStory(stories[0]);
    stories.forEach((story, index) => {
      const li = document.createElement('li');
      li.textContent = story.title;
      li.dataset.storyId = story.id;
      if (index === 0) li.classList.add('active');
      li.tabIndex = 0;
      li.addEventListener('click', () => {
        storyList.querySelectorAll('li').forEach(i => i.classList.remove('active'));
        li.classList.add('active');
        showStory(story);
      });
      li.addEventListener('keydown', e => {
        if(e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          storyList.querySelectorAll('li').forEach(i => i.classList.remove('active'));
          li.classList.add('active');
          showStory(story);
        }
      });
      storyList.appendChild(li);
    });
  }

  // نمایش محتوای داستان
  function showStory(story) {
    storyTitle.textContent = story.title;
    if (story.cover) {
      storyCover.src = story.cover;
      storyCover.style.display = 'block';
      storyCover.alt = `کاور داستان ${story.title}`;
    } else {
      storyCover.style.display = 'none';
      storyCover.src = '';
      storyCover.alt = '';
    }
    storyText.textContent = story.text;
  }

  // پاک کردن محتوای داستان
  function clearContent() {
    storyTitle.textContent = '';
    storyCover.style.display = 'none';
    storyText.textContent = '';
  }

  // تنظیم فعال بودن فاز و نمایش داستان‌های آن
  function setActivePhase(phaseKey) {
    // حذف کلاس فعال از همه فازها
    phaseList.querySelectorAll('li').forEach(li => li.classList.remove('active'));
    // افزودن کلاس فعال به فاز انتخابی
    const selected = Array.from(phaseList.children).find(li => li.dataset.phase === phaseKey);
    if (selected) selected.classList.add('active');
    // نمایش داستان‌های فاز انتخاب شده
    showStories(phaseKey);
  }

  // شروع کار
  buildPhaseList();
  setActivePhase('phase1');
</script>

</body>
</html>
