<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>توشان‌ورس | Tooshanverse</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>توشان‌ورس | Tooshanverse</h1>
    <p>آغاز دوباره قهرمانان ایران</p>
    <div class="menu-btn" id="menu-btn">
      <div></div><div></div><div></div>
    </div>
    <nav class="menu" id="menu">
      <a id="homeBtn">خانه</a>
      <a href="photos.html">عکس‌ها</a>
      <a href="#">ساخته‌های هوش مصنوعی</a>
      <a href="about.html">درباره ما</a>
      <a href="#">گفتگو با من</a>
    </nav>
  </header>

  <div id="siteSearchContainer">
    <input
      type="text"
      id="siteSearchInput"
      placeholder="جستجو در کل سایت..."
      onkeyup="siteSearch()"
      autocomplete="off"
    />
    <div id="searchResults"></div>
  </div>

  <!-- تابلو اعلانات گوشه سمت چپ -->
  <section id="notice-board-section">
    <h2>تابلو اعلانات</h2>
    <div id="notice-viewer">در حال بارگذاری اعلان‌ها...</div>
  </section>

  <!-- شمارنده گوشه سمت راست -->
  <div id="countdown-container">
    در حال بارگذاری شمارنده...
  </div>

  <section id="characters">
    <h2>شخصیت‌ها</h2>
    <div class="category-cards">
      <div class="category-card" onclick="openPopup('heroes')">🛡️ قهرمان‌ها</div>
      <div class="category-card" onclick="openPopup('villains')">😈 ویلن‌ها</div>
      <div class="category-card" onclick="openPopup('neutrals')">⚖️ خنثی‌ها</div>
    </div>
  </section>

  <!-- پاپ‌آپ‌ها -->
  <div id="popup-heroes" class="popup">
    <h3>🛡️ قهرمان‌ها</h3>
    <ul class="character-list">
      <li onclick="openPopup('taskin')">🌀 تسکین</li>
      <li onclick="openPopup('electropulse')">⚡ الکتروپالس</li>
      <li onclick="openPopup('gardafrid')">🔥 گردآفرید</li>
      <li onclick="openPopup('physica')">لرد فیزیکا</li>
      <li onclick="openPopup('anasser')">عناصر</li>
      <li onclick="openPopup('mordavij')">مرداویچ</li>
      <li onclick="openPopup('strix')">استریکس</li>
      <li onclick="openPopup('hashashin')">حشاشین</li>
      <li onclick="openPopup('eternals')">ارتش جاویدان</li>
    </ul>
    <button onclick="closePopup()">بازگشت</button>
  </div>

  <div id="popup-villains" class="popup">
    <h3>😈 ویلن‌ها</h3>
    <ul class="character-list">
      <li onclick="openPopup('agnatus')">آگناتوس</li>
    </ul>
    <button onclick="closePopup()">بازگشت</button>
  </div>

  <div id="popup-neutrals" class="popup">
    <h3>⚖️ شخصیت‌های خنثی</h3>
    <ul class="character-list">
      <li onclick="openPopup('nima-raha')">نیما و رها</li>
    </ul>
    <button onclick="closePopup()">بازگشت</button>
  </div>

  <div id="popup-physica" class="popup">
  <h3>لرد فیزیکا</h3>
  <p><strong>نام واقعی:</strong> نوید سهیلی</p>
  <p><strong>قدرت:</strong> کنترل قوانین فیزیک در یک محدوده مشخص</p>
  <p><strong>سن:</strong> ۴۲ سال</p>
  <p><strong>جایگاه:</strong> بنیان‌گذار شرکت نوآوران نیرو، اولین قهرمان توشان‌ورس</p>
  
  <h4>داستان:</h4>
  <p>نوید سهیلی یکی از موفق‌ترین کارآفرینان ایران بود؛ فردی با ذهنی تیز، آینده‌نگر و جاه‌طلب. اما زندگی‌اش برای همیشه با وقوع یک انفجار آبی مرموز در خارج از تهران تغییر کرد.</p>
  <p>این انفجار عظیم، که منشأیی ناشناخته داشت، باعث ترکیب ذهن نوید با هوش مصنوعی ماشین شخصی‌اش، «تسا»، شد. پس از آن، توانایی بی‌نظیری در کنترل قوانین فیزیک به‌دست آورد؛ توانایی‌ای که بیشتر از آنکه نعمت باشد، به باری سنگین برای ذهن او تبدیل شد.</p>
  <p>اما این تمام ماجرا نبود. همان انفجار به فردی دیگر نیز قدرتی شوم بخشید؛ فردی به نام آگناتوس، با قدرت کنترل ذهن.</p>
  <p>در جریان یکی از دخالت‌های ذهنی آگناتوس، نوید تبدیل به تهدیدی برای مردم شد. اگرچه در نهایت توسط تسا نجات پیدا کرد، اما دیگر دیر شده بود... مردم از او متنفر شده بودند، عزیزانش را از دست داده بود، و خود را از جامعه کنار کشید.</p>
  <p>لرد فیزیکا حالا در سایه زندگی می‌کند؛ قهرمانی تنها، با گذشته‌ای پر از شکست، اما با ذهنی همچنان بیدار.</p>

  <h4>نقش در توشان‌ورس:</h4>
  <p>لرد فیزیکا، بنیان‌گذار داستان‌های توشان‌ورس است. حضورش هرچند کوتاه، اما اثری ماندگار بر سرنوشت قهرمانان دیگر دارد. او همان کسی‌ست که ناخواسته جرقهٔ آغاز این دنیا را زد....</p>

  <button onclick="openPopup('heroes')">بازگشت به قهرمان‌ها</button>
</div>
  
  <div id="popup-taskin" class="popup">
    <h3>🌀 تسکین</h3>
    <p>اطلاعات درباره تسکین به زودی اضافه خواهد شد</p>
    <button onclick="openPopup('heroes')">بازگشت به قهرمان‌ها</button>
  </div>

  <div id="popup-electropulse" class="popup">
    <h3>⚡ الکتروپالس</h3>
    <p>اطلاعات درباره الکتروپالس به زودی اضافه خواهد شد.</p>
    <button onclick="openPopup('heroes')">بازگشت به قهرمان‌ها</button>
  </div>

  <div id="popup-gardafrid" class="popup">
    <h3>🔥 گردآفرید</h3>
    <p>اطلاعات درباره گردآفرید به زودی اضافه خواهد شد.</p>
    <button onclick="openPopup('heroes')">بازگشت به قهرمان‌ها</button>
  </div>

  <div id="popup-anasser" class="popup">
    <h3>عناصر</h3>
    <p>اطلاعات درباره عناصر به زودی اضافه خواهد شد.</p>
    <button onclick="openPopup('heroes')">بازگشت به قهرمان‌ها</button>
  </div>

  <div id="popup-mordavij" class="popup">
    <h3>مرداویچ</h3>
    <p>اطلاعات درباره مرداویچ به زودی اضافه خواهد شد.</p>
    <button onclick="openPopup('heroes')">بازگشت به قهرمان‌ها</button>
  </div>

  <div id="popup-strix" class="popup">
    <h3>استریکس</h3>
    <p>اطلاعات درباره استریکس به زودی اضافه خواهد شد.</p>
    <button onclick="openPopup('heroes')">بازگشت به قهرمان‌ها</button>
  </div>

  <div id="popup-hashashin" class="popup">
    <h3>حشاشین</h3>
    <p>اطلاعات درباره حشاشین به زودی اضافه خواهد شد.</p>
    <button onclick="openPopup('heroes')">بازگشت به قهرمان‌ها</button>
  </div>

  <div id="popup-eternals" class="popup">
    <h3>ارتش جاویدان</h3>
    <p>اطلاعات درباره ارتش جاویدان به زودی اضافه خواهد شد.</p>
    <button onclick="openPopup('heroes')">بازگشت به قهرمان‌ها</button>
  </div>

  <div id="popup-nima-raha" class="popup">
    <h3>نیما و رها</h3>
    <p>اطلاعات درباره نیما و رها به زودی اضافه خواهد شد.</p>
    <button onclick="openPopup('neutrals')">بازگشت به خنثی ها</button>
  </div>

  <div id="popup-agnatus" class="popup">
  <h3>آگناتوس</h3>
  <p><strong>نام واقعی:</strong> فرهاد مهرگان</p>
  <p><strong>قدرت:</strong> کنترل ذهن (Mind Control)</p>
  <p><strong>سن:</strong> حدود ۴۲ سال</p>
  <p><strong>جایگاه:</strong> آنتاگونیست اصلی داستان لرد فیزیکا</p>

  <h4>داستان:</h4>
  <p>آگناتوس نه با لباس‌های شاخ‌دار و ماسک‌های رنگی می‌آید، نه خنده‌های بلند و جنون‌آمیز دارد. او مردی‌ست عادی… با ظاهری آرام، صدایی نرم، و نگاهی که می‌تواند ذهن شما را در هم بشکند.</p>
  <p>هم‌زمان با انفجار آبی، او نیز در حاشیه شهر، درگیر آن موج ناشناخته شد. قدرتی وحشی و غیرقابل کنترل به درون ذهنش تزریق شد؛ قدرتی که به او توانایی سلطه بر افکار دیگران را بخشید. اما ذهن او – برخلاف ظاهرش – تاریک‌تر از چیزی بود که باید می‌بود.</p>
  <p>او انتخاب نکرد قهرمان باشد… او انتخاب کرد کنترل کند، تسلط یابد، و مسیر انسانیت را به بیراهه بکشاند.</p>
  <p>اولین قربانی‌اش؟ نوید سهیلی، لرد فیزیکا.</p>
  <p>او با بهره‌گیری از قدرت کنترل ذهن، ذهن نوید را آلوده کرد، و قهرمانی را به هیولایی بدل ساخت.</p>
  <p>آگناتوس دشمنی‌ست که نمی‌توان با مشت او را شکست داد. چون نبرد، در ذهن شما اتفاق می‌افتد…</p>

  <h4>نقش در توشان‌ورس:</h4>
  <p>آگناتوس آغازگر تاریکی‌ست. او اولین ویلن اصلی در جهان توشان‌ورس است؛ فردی که تأثیراتش تنها محدود به یک داستان نیست. پیامدهای کارهای او، ذهن و سرنوشت قهرمانان آینده را هم دگرگون خواهد کرد...</p>

  <button onclick="openPopup('villains')">بازگشت به ویلن‌ها</button>
</div>

  <section id="comics">
    <h2>کمیک‌ها</h2>
    <div class="button-container">
      <a href="comics.html" class="chat-button">📚 کمیک‌ها</a>
    </div>
  </section>

  <section id="chat">
    <h2>گفت‌وگوی آنلاین</h2>
    <a href="chat.html" class="chat-button">💬 ورود به توشان چت</a>
  </section>
  
  <footer>
    <p>تمام حقوق متعلق به توشان استودیو © 2025</p>
  </footer>

  <script>
    // منوی موبایل
    const menuBtn = document.getElementById('menu-btn');
    const menu = document.getElementById('menu');
    menuBtn.addEventListener('click', () => {
      menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
    });

    // باز و بسته کردن پاپ‌آپ‌ها
    function openPopup(name) {
      document.querySelectorAll('.popup').forEach(popup => popup.classList.remove('show'));
      const popup = document.getElementById('popup-' + name);
      if (popup) {
        popup.classList.add('show');
      }
    }
    function closePopup() {
      document.querySelectorAll('.popup').forEach(popup => popup.classList.remove('show'));
    }

    // جستجوی سایت
    function siteSearch() {
      const input = document.getElementById('siteSearchInput');
      const filter = input.value.trim().toLowerCase();
      const results = document.getElementById('searchResults');
      results.innerHTML = '';
      if (filter.length < 2) return;

      // نمونه داده برای جستجو، می‌توان از API یا داده واقعی استفاده کرد
      const searchItems = [
        { title: 'تسکین', description: '' },
        { title: 'لرد فیزیکا', description: '' },
        { title: 'الکتروپالس', description: '' },
        { title: 'کمیک‌های توشان‌ورس', description: '' },
        { title: 'گفت‌وگو با من', description: '' },
      ];

      const filtered = searchItems.filter(item =>
        item.title.toLowerCase().includes(filter) ||
        item.description.toLowerCase().includes(filter)
      );

      if (filtered.length === 0) {
        results.textContent = 'موردی یافت نشد.';
        return;
      }

      filtered.forEach(item => {
        const p = document.createElement('p');
        p.textContent = item.title + ' - ' + item.description;
        p.onclick = () => {
          alert('گزینه انتخاب شده: ' + item.title);
          // اینجا می‌توان لینک یا اکشن اختصاصی اضافه کرد
        };
        results.appendChild(p);
      });
    }

    // ---------- شمارنده و تابلو اعلانات ----------

  async function fetchSheetData() {
  const sheetId = '1En847pG6Th8Ihu7pAdEBLohzbjkDZepqO1Ur8oKPtKo';
  const url = `https://docs.google.com/spreadsheets/d/${sheetId}/export?format=csv&id=${sheetId}&gid=0`;
  try {
    const response = await fetch(url);
    const csvText = await response.text();
    const rows = csvText.split('\n').filter(row => row.trim() !== '');
    return rows.map(row => row.split(','));
  } catch (error) {
    console.error('خطا در خواندن گوگل شیت:', error);
    return null;
  }
}

async function updateCountdown() {
  const countdownContainer = document.getElementById('countdown-container');
  const data = await fetchSheetData();
  if (!data || data.length === 0) {
    countdownContainer.textContent = 'خطا در بارگذاری شمارنده';
    return;
  }

  const targetTimeString = data[0][0].trim();
  const targetTime = new Date(targetTimeString);
  if (isNaN(targetTime.getTime())) {
    countdownContainer.textContent = 'تاریخ شمارنده معتبر نیست';
    return;
  }

  function updateTimer() {
    const now = new Date();
    const diff = targetTime - now;

    if (diff <= 0) {
      countdownContainer.textContent = 'زمان انتشار داستان فرا رسیده!';
      clearInterval(timerInterval);
      return;
    }

    const hours = Math.floor(diff / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);

    countdownContainer.textContent = `زمان تا انتشار داستان: ${hours} ساعت و ${minutes} دقیقه و ${seconds} ثانیه`;
  }

  updateTimer();
  const timerInterval = setInterval(updateTimer, 1000);
}

    async function showNotices() {
      const noticeViewer = document.getElementById('notice-viewer');
      const data = await fetchSheetData();
      if (!data || data.length === 0) {
        noticeViewer.textContent = 'فعلا هیچ اعلانی ثبت نشده است.';
        return;
      }

      // فرض می‌کنیم ستون دوم هر ردیف اعلان است
      const notices = data.map(row => row[1] ? row[1].trim() : '').filter(text => text.length > 0);

      if (notices.length === 0) {
        noticeViewer.textContent = 'فعلا هیچ اعلانی ثبت نشده است.';
        return;
      }

     let currentNoticeIndex = 0;
noticeViewer.textContent = notices[currentNoticeIndex];
noticeViewer.classList.add('fade-in');

setInterval(() => {
  // مرحله 1: محو شدن
  noticeViewer.classList.remove('fade-in');
  noticeViewer.classList.add('fade-out');

  // بعد از نیم ثانیه (محوشدن)، متن جدید رو نشون بده و ظاهر کن
  setTimeout(() => {
    currentNoticeIndex = (currentNoticeIndex + 1) % notices.length;
    noticeViewer.textContent = notices[currentNoticeIndex];

    noticeViewer.classList.remove('fade-out');
    noticeViewer.classList.add('fade-in');
  }, 500);
}, 5000);
    }
    // فراخوانی توابع شمارنده و اعلان‌ها
    updateCountdown();
    showNotices();
  </script>
</body>
</html>
